# === Class body vars NOT accessible in methods ===
class ScopeTest:
    x = 10

    def method(self):
        # Class body variable x is NOT in method scope
        # Must access via self.x or ScopeTest.x
        try:
            return x  # NameError
        except NameError:
            return 'no x'

    def correct_method(self):
        return self.x  # Correct: access via self

    def class_access(self):
        return ScopeTest.x  # Also correct: via class name


st = ScopeTest()
assert st.method() == 'no x', 'class body var not in method scope'
assert st.correct_method() == 10, 'class var accessible via self'
assert st.class_access() == 10, 'class var accessible via class name'

# === Class body can reference outer closures ===
# TODO: Requires cell variable support for class bodies (Phase 3)
# def outer():
#     y = 20
#     class Inner:
#         z = y  # This DOES capture y from outer
#         def method(self):
#             return y  # This also captures y from outer
#     return Inner
# InnerCls = outer()
# assert InnerCls.z == 20, 'class body captur 10, 'method accesses class var via self'

# === Method ct s.x == 42, 'instantiation calls __init__'


# === No __init__ with args raises TypeError ===
class NoInit:
    pass


NoInit()  # OK, no args

try:
    NoInit(1, 2, 3)
    assert False, 'should raise TypeError'
except TypeError as e:
    assert 'takes no arguments' in str(e), 'error message format'
