# call-external
# Test bare raise after external call resumption in except handler
# This tests that current_exception is properly restored after resuming
# Note: bare raise after resumption only works when exception is bound (as e)

caught_reraised = Falould re-raise original exception'

# === Nested handler bare raise after resumption ===
outer_nested_reraise = False
try:
    try:
        raise ValueError('outer error')
    except ValueError:
        try:
            raise KeyError('inner error')
        except KeyError:
            _ = add_ints(1, 2)
        raise
except ValueError as reraised:
    outer_nested_reraise = repr(reraised) == "ValueError('outer error')"

assert outer_nested_reraise, 'bare raise in outer handler should re-raise original exception after nested resumption'
